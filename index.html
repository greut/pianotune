<!DOCTYPE html>

<meta charset="utf-8">
<title>pianotune</title>

<script src="dist/vendor.min.js"></script>
<script>
    var synth = new Tone.PolySynth(8, Tone.Synth, {
        oscillator: {
            type: "sine3"
        },
        envelope: {
            attack: .03,
            decay: .1,
            sustain: .2,
            release: .6
        }
    }).toMaster()

    function playNote(time, event) {
        synth.triggerAttackRelease(event.name, event.duration, time, event.velocity)
    }

    MidiConvert.load('Sherlocked.mid', function(midi) {
        Tone.Transport.bpm.value = midi.bpm
        Tone.Transport.timeSignature = midi.timeSignature

        midi.tracks.forEach(function(track) {
            new Tone.Part(playNote, track.notes).start(0)
        })

        Tone.Transport.start()
    })
</script>
